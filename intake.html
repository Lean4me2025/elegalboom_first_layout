<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>LLC Formation — Intake</title>
  <style>
    body{font-family:Arial, sans-serif; margin:20px; background:#f9fafb; color:#111}
    .hidden{display:none}
    .step{max-width:700px;margin:auto}
    .navbtn{margin:10px 4px; padding:8px 14px; background:#0a66c2; color:white; border:none; border-radius:6px; cursor:pointer}
    pre{background:#1e1e1e;color:#d4d4d4;padding:12px;border-radius:8px;overflow-x:auto}
    .progress{height:6px;background:#eee;margin:20px 0;border-radius:3px;overflow:hidden}
    .bar{height:100%;background:#0a66c2;width:0}
  </style>
</head>
<body>
  <h1>LLC Formation — Intake</h1>
  <p>Tell us about your company. We’ll adapt the questions to your state automatically.</p>
  <div class="progress"><div class="bar" id="bar"></div></div>

  <div id="step1" class="step">
    <h2>Company Basics</h2>
    <label>LLC Name <input required id="llc_name"></label><br>
    <label>Formation State <select required id="state">
      <option value="">Select…</option><option value="TX">Texas</option><option value="CA">California</option>
    </select></label><br>
    <button class="navbtn" id="toStep2">Next</button>
  </div>

  <div id="step2" class="step hidden">
    <h2>Registered Agent</h2>
    <label>Agent Name <input required id="registered_agent_name"></label><br>
    <label>Agent Address <input required id="registered_agent_address"></label><br>
    <button class="navbtn" id="back1">Back</button>
    <button class="navbtn" id="toStep3">Next</button>
  </div>

  <div id="step3" class="step hidden">
    <h2>Organizer</h2>
    <label>Organizer Name <input required id="organizer_name"></label><br>
    <label>Organizer Address <input required id="organizer_address"></label><br>
    <button class="navbtn" id="back2">Back</button>
    <button class="navbtn" id="reviewBtn">Review</button>
  </div>

  <div id="step4" class="step hidden">
    <h2>Review</h2>
    <p>Confirm your details before checkout.</p>
    <pre id="reviewBox"></pre>
    <button class="navbtn" id="back3">Back</button>
    <button class="navbtn">Continue to Checkout</button>
  </div>

<script>
function setProgress(n){document.getElementById('bar').style.width=(n*25)+"%"}
function validateSection(sectionEl){
  const fields = sectionEl.querySelectorAll('input,select,textarea');
  for(const el of fields){
    if(el.closest('.hidden')) continue;
    if(!el.checkValidity()){el.reportValidity(); el.focus(); return false;}
  }
  return true;
}
function collectData(){
  return {
    llc_name:document.getElementById('llc_name').value,
    state:document.getElementById('state').value,
    registered_agent_name:document.getElementById('registered_agent_name').value,
    registered_agent_address:document.getElementById('registered_agent_address').value,
    organizer_name:document.getElementById('organizer_name').value,
    organizer_address:document.getElementById('organizer_address').value
  }
}
const step1=document.getElementById('step1'), step2=document.getElementById('step2'),
      step3=document.getElementById('step3'), step4=document.getElementById('step4');

document.getElementById('toStep2').onclick=()=>{if(!validateSection(step1))return;
  step1.classList.add('hidden'); step2.classList.remove('hidden'); setProgress(2)};
document.getElementById('toStep3').onclick=()=>{if(!validateSection(step2))return;
  step2.classList.add('hidden'); step3.classList.remove('hidden'); setProgress(3)};
document.getElementById('reviewBtn').onclick=()=>{if(!validateSection(step3))return;
  const data=collectData();
  document.getElementById('reviewBox').textContent=JSON.stringify(data,null,2);
  step3.classList.add('hidden'); step4.classList.remove('hidden'); setProgress(4)};

document.getElementById('back1').onclick=()=>{step2.classList.add('hidden'); step1.classList.remove('hidden'); setProgress(1)};
document.getElementById('back2').onclick=()=>{step3.classList.add('hidden'); step2.classList.remove('hidden'); setProgress(2)};
document.getElementById('back3').onclick=()=>{step4.classList.add('hidden'); step3.classList.remove('hidden'); setProgress(3)};
setProgress(1);
</script>
</body>
</html>
